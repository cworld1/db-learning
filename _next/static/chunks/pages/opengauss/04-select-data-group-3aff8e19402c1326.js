(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[391],{3497:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/opengauss/04-select-data-group",function(){return s(6109)}])},6109:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return g},useTOC:function(){return useTOC}});var i=s(5893),r=s(7812),d=s(845),t=s(8925),l={src:"/_next/static/media/2182109.53b487fb.png",height:300,width:655,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAMAAACEE47CAAAABlBMVEUTDw8EAwNPO+TYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEElEQVR4nGNgQAKMIIDJAAAA2AAQlU/++wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:4},h={src:"/_next/static/media/2182121.19381499.png",height:307,width:725,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAABlBMVEUGAwMTEBBvPpDwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEElEQVR4nGNgZGRkAAMMBgAAqwAKrsBzWgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:3},c={src:"/_next/static/media/2182143.4437aef5.png",height:272,width:658,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAABlBMVEUKBwcTEREMAmDLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAF0lEQVR4nGNgZGBgZAABRkZGCAPEAtEAAJwACvJIRcIAAAAASUVORK5CYII=",blurWidth:8,blurHeight:3},a={src:"/_next/static/media/2182147.8ed04b5c.png",height:289,width:1310,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAABlBMVEUPDw8lFxc21AnHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGNgZGRkYABhGAAAAFkABif8O9wAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},A={src:"/_next/static/media/2182159.9b6bbf9b.png",height:255,width:1391,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAMAAADU3h9xAAAABlBMVEUXFBQQDw/6rthIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEUlEQVR4nGNgYGBgZGRkYAAAABUABFwX7MUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:1},x={src:"/_next/static/media/2182175.b54dc566.png",height:567,width:1600,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAABlBMVEUODg4ZFRWJHYvtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAEklEQVR4nGNgZGSAAEZGBAIDAACuAAutR7LEAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},j={src:"/_next/static/media/2182179.178dcb83.png",height:271,width:1423,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAACVBMVEUUFBQoFhYICgp8K8CnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFElEQVR4nGNgYGBgBAEGBgYmMAAAAHgAEuI81ZwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2},o={src:"/_next/static/media/2182185.be682cc2.png",height:272,width:1119,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAACVBMVEUjFxcJCgoUEhJ+eG7uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAFUlEQVR4nGNgYGBgYmIAASYmRhAAAABxAA4MMR6SAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2};function useTOC(e){let n={code:"code",...(0,t.a)()};return[{value:"对查询结果进行排序",id:"对查询结果进行排序",depth:2},{value:"对查询结果排序",id:"对查询结果排序",depth:3},{value:"指定排序方向",id:"指定排序方向",depth:3},{value:"分组查询",id:"分组查询",depth:2},{value:"分组查询的单独使用",id:"分组查询的单独使用",depth:5},{value:"GROUP BY 与 聚合函数",id:"group-by-与-聚合函数",depth:2},{value:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.code,{children:"GROUP BY"})," 与聚合函数的使用"]}),id:"group-by-与聚合函数的使用",depth:3},{value:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.code,{children:"GROUP BY"})," 中 ",(0,i.jsx)(n.code,{children:"SELECT"})," 指定的字段限制"]}),id:"group-by-中-select-指定的字段限制",depth:3},{value:"使用 HAVING 与 ORDER BY",id:"使用-having-与-order-by",depth:2},{value:(0,i.jsxs)(i.Fragment,{children:["使用",(0,i.jsx)(n.code,{children:"having"}),"子句进行分组筛选"]}),id:"使用having子句进行分组筛选",depth:5},{value:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.code,{children:"Having"})," 与 ",(0,i.jsx)(n.code,{children:"Where"})," 的区别"]}),id:"having-与-where-的区别",depth:5},{value:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.code,{children:"Group By"})," 和 ",(0,i.jsx)(n.code,{children:"Order By"})]}),id:"group-by-和-order-by",depth:5}]}var g=(0,r.c)(function(e){let{toc:n=useTOC(e)}=e,s={code:"code",h2:"h2",h3:"h3",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:n[0].id,children:n[0].value}),"\n",(0,i.jsx)(s.h3,{id:n[1].id,children:n[1].value}),"\n",(0,i.jsxs)(s.p,{children:["我们知道在 ",(0,i.jsx)(s.code,{children:"OpenGauss"})," 中从数据表中读取数据都是使用 ",(0,i.jsx)(s.code,{children:"SELECT"})," 语句。 如果我们需要对读取的语句进行排序，我们就可以使用 ",(0,i.jsx)(s.code,{children:"Order By"})," 子句来设定你想要按照的字段进行排序并返回结果。"]}),"\n",(0,i.jsx)(s.p,{children:"语法："}),"\n",(0,i.jsx)(s.pre,{tabIndex:"0","data-language":"sql","data-word-wrap":"","data-copy":"",children:(0,i.jsx)(s.code,{children:(0,i.jsxs)(s.span,{children:[(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"SELECT"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 字段名 "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"FROM"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 表名 "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"ORDER BY"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 字段名 [ASC[DESC]];"})]})})}),"\n",(0,i.jsxs)(s.p,{children:["你还可以根据自己的需求添加 ",(0,i.jsx)(s.code,{children:"WHERE"}),"、",(0,i.jsx)(s.code,{children:"LIKE"})," 子句来设置条件，再对结果过进行排序显示。"]}),"\n",(0,i.jsxs)(s.p,{children:["现有 ",(0,i.jsx)(s.code,{children:"user"})," 表数据如下："]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"id"}),(0,i.jsx)(s.th,{children:"name"}),(0,i.jsx)(s.th,{children:"age"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Tom"}),(0,i.jsx)(s.td,{children:"32"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"Nancy"}),(0,i.jsx)(s.td,{children:"18"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"Allen"}),(0,i.jsx)(s.td,{children:"24"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"4"}),(0,i.jsx)(s.td,{children:"Jason"}),(0,i.jsx)(s.td,{children:"23"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:["我们需要查询表中信息，要求按照年龄的",(0,i.jsx)(s.strong,{children:"升序"}),"进行排序："]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:l})}),"\n",(0,i.jsx)(s.h3,{id:n[2].id,children:n[2].value}),"\n",(0,i.jsxs)(s.p,{children:["从上面的查询语句中我们并未看到有任何表示",(0,i.jsx)(s.strong,{children:"排序方向"}),"的关键字，在默认情况下，它是按",(0,i.jsx)(s.strong,{children:"升序"}),"排列的。"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"ASC"})," 升序关键字"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"DESC"})," 降序关键字"]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:h})}),"\n",(0,i.jsx)(s.h2,{id:n[3].id,children:n[3].value}),"\n",(0,i.jsx)(s.p,{children:"但是在实际开发中一般不会用到，本章节只作为对分组查询的了解。往后继续学习，我们会介绍分组查询与其他查询一起结合使用。"}),"\n",(0,i.jsx)(s.h5,{id:n[4].id,children:n[4].value}),"\n",(0,i.jsxs)(s.p,{children:["分组查询的关键字是 ",(0,i.jsx)(s.code,{children:"Group By"}),"，查询的是每个分组中 ",(0,i.jsx)(s.strong,{children:"首次出现的一条记录"}),"。"]}),"\n",(0,i.jsx)(s.p,{children:"语法："}),"\n",(0,i.jsx)(s.pre,{tabIndex:"0","data-language":"sql","data-word-wrap":"","data-copy":"",children:(0,i.jsx)(s.code,{children:(0,i.jsxs)(s.span,{children:[(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"SELECT"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 字段名 "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"FROM"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 表名 "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"GROUP BY"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 字段名;"})]})})}),"\n",(0,i.jsxs)(s.p,{children:["例如： 现有 ",(0,i.jsx)(s.code,{children:"user"})," 表数据："]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"id"}),(0,i.jsx)(s.th,{children:"name"}),(0,i.jsx)(s.th,{children:"sex"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Tom"}),(0,i.jsx)(s.td,{children:"男"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"Nancy"}),(0,i.jsx)(s.td,{children:"女"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"Allen"}),(0,i.jsx)(s.td,{children:"Null"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"4"}),(0,i.jsx)(s.td,{children:"Jason"}),(0,i.jsx)(s.td,{children:"男"})]})]})]}),"\n",(0,i.jsx)(s.p,{children:"我们对表中数据的性别进行分组查询："}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:c})}),"\n",(0,i.jsxs)(s.p,{children:["可以看出，返回了 ",(0,i.jsx)(s.code,{children:"3"})," 条记录，分别是 ",(0,i.jsx)(s.code,{children:"sex"})," 字段值为 ",(0,i.jsx)(s.code,{children:"Null"}),"、女、男的记录，查询结果按照 ",(0,i.jsx)(s.code,{children:"sex"})," 字段中不同的值进行了",(0,i.jsx)(s.strong,{children:"分类"}),"，",(0,i.jsx)(s.strong,{children:"只显示每个分组中的一条记录"}),"，意义不大，一般情况下，",(0,i.jsx)(s.code,{children:"GROUP BY"})," 都和聚合函数一起使用。"]}),"\n",(0,i.jsx)(s.h2,{id:n[5].id,children:n[5].value}),"\n",(0,i.jsxs)(s.p,{children:["在之前的实训中我们简单的提到过 ",(0,i.jsx)(s.code,{children:"GROUP BY"})," 关键字，本实训让我们进一步了解 ",(0,i.jsx)(s.code,{children:"GROUP BY"})," 与聚合函数的使用。"]}),"\n",(0,i.jsx)(s.p,{children:"为了完成本关任务，你需要掌握："}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GROUP BY"}),"与聚合函数的结合使用；"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GROUP BY"}),"中",(0,i.jsx)(s.code,{children:"SELECT"}),"指定的字段限制。"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:n[6].id,children:n[6].value}),"\n",(0,i.jsx)(s.p,{children:"基本格式："}),"\n",(0,i.jsx)(s.pre,{tabIndex:"0","data-language":"sql","data-word-wrap":"","data-copy":"",children:(0,i.jsxs)(s.code,{children:[(0,i.jsxs)(s.span,{children:[(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"select"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" [聚合函数] 字段名 "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"from"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 表名"})]}),"\n",(0,i.jsx)(s.span,{children:(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"[where 查询条件]"})}),"\n",(0,i.jsx)(s.span,{children:(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"[group by 字段名]"})})]})}),"\n",(0,i.jsxs)(s.p,{children:["先提供表 ",(0,i.jsx)(s.code,{children:"Info"})," 结构如下："]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"category"}),(0,i.jsx)(s.th,{children:"count"}),(0,i.jsx)(s.th,{children:"digest"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"a"}),(0,i.jsx)(s.td,{children:"5"}),(0,i.jsx)(s.td,{children:"a2002"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"a"}),(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"a2001"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"a"}),(0,i.jsx)(s.td,{children:"11"}),(0,i.jsx)(s.td,{children:"a2001"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"b"}),(0,i.jsx)(s.td,{children:"10"}),(0,i.jsx)(s.td,{children:"b2003"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"b"}),(0,i.jsx)(s.td,{children:"6"}),(0,i.jsx)(s.td,{children:"b2002"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"b"}),(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"b2001"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"9"}),(0,i.jsx)(s.td,{children:"c2005"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"9"}),(0,i.jsx)(s.td,{children:"c2004"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"8"}),(0,i.jsx)(s.td,{children:"c2003"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"7"}),(0,i.jsx)(s.td,{children:"c2002"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"4"}),(0,i.jsx)(s.td,{children:"c2001"})]})]})]}),"\n",(0,i.jsx)(s.p,{children:"示例：将表中数据分类并汇总"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:a})}),"\n",(0,i.jsx)(s.h3,{id:n[7].id,children:n[7].value}),"\n",(0,i.jsx)(s.p,{children:"示例："}),"\n",(0,i.jsx)(s.pre,{tabIndex:"0","data-language":"sql","data-word-wrap":"","data-copy":"",children:(0,i.jsxs)(s.code,{children:[(0,i.jsxs)(s.span,{children:[(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"select"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" category,"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"sum"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"(count),disgest "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"from"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" info"})]}),"\n",(0,i.jsxs)(s.span,{children:[(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"group by"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" category;"})]})]})}),"\n",(0,i.jsxs)(s.p,{children:["执行后会提示下错误。这就是需要注意的一点，在 ",(0,i.jsx)(s.code,{children:"select"})," 指定的字段",(0,i.jsxs)(s.strong,{children:["要么就要包含在 ",(0,i.jsx)(s.code,{children:"Group By"})," 语句的后面，作为分组的依据；要么就要被包含在聚合函数中"]}),"。"]}),"\n",(0,i.jsx)(s.h2,{id:n[8].id,children:n[8].value}),"\n",(0,i.jsx)(s.h5,{id:n[9].id,children:n[9].value}),"\n",(0,i.jsxs)(s.p,{children:["简单来说，",(0,i.jsx)(s.code,{children:"having"})," 子句用来对",(0,i.jsx)(s.strong,{children:"分组后"}),"的数据进行筛选，即 ",(0,i.jsx)(s.code,{children:"having"})," 针对查询结果中的列发挥筛选数据作用。因此 ",(0,i.jsx)(s.code,{children:"having"})," 通常与 ",(0,i.jsx)(s.code,{children:"Group by"})," 连用。"]}),"\n",(0,i.jsx)(s.p,{children:"基本格式："}),"\n",(0,i.jsx)(s.pre,{tabIndex:"0","data-language":"sql","data-word-wrap":"","data-copy":"",children:(0,i.jsx)(s.code,{children:(0,i.jsxs)(s.span,{children:[(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"select"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" [聚合函数] 字段名 "}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"from"}),(0,i.jsx)(s.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" 表名 [where 查询条件]　[group by 字段名] [having 字段名 筛选条件]"})]})})}),"\n",(0,i.jsxs)(s.p,{children:["表 ",(0,i.jsx)(s.code,{children:"Info"})," 的数据信息仍如下："]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"category"}),(0,i.jsx)(s.th,{children:"count"}),(0,i.jsx)(s.th,{children:"digest"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"a"}),(0,i.jsx)(s.td,{children:"5"}),(0,i.jsx)(s.td,{children:"a2002"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"a"}),(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"a2001"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"a"}),(0,i.jsx)(s.td,{children:"11"}),(0,i.jsx)(s.td,{children:"a2001"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"b"}),(0,i.jsx)(s.td,{children:"20"}),(0,i.jsx)(s.td,{children:"b2003"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"b"}),(0,i.jsx)(s.td,{children:"15"}),(0,i.jsx)(s.td,{children:"b2002"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"b"}),(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"b2001"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"9"}),(0,i.jsx)(s.td,{children:"c2005"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"9"}),(0,i.jsx)(s.td,{children:"c2004"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"8"}),(0,i.jsx)(s.td,{children:"c2003"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"7"}),(0,i.jsx)(s.td,{children:"c2002"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"c"}),(0,i.jsx)(s.td,{children:"4"}),(0,i.jsx)(s.td,{children:"c2001"})]})]})]}),"\n",(0,i.jsxs)(s.p,{children:["示例：查询将表中数据分类后数量大于",(0,i.jsx)(s.code,{children:"20"}),"的类别信息"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:A})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"select"})," 语句中，",(0,i.jsx)(s.code,{children:"where"}),"、",(0,i.jsx)(s.code,{children:"group by"}),"、",(0,i.jsx)(s.code,{children:"having"})," 子句和聚合函数的执行次序如下："]}),"\n",(0,i.jsxs)(s.p,{children:["1.",(0,i.jsx)(s.code,{children:"where"})," 子句从数据源中去除不符合条件的数据；"]}),"\n",(0,i.jsxs)(s.p,{children:["2.然后 ",(0,i.jsx)(s.code,{children:"group by"})," 子句搜集数据行到各个组中；"]}),"\n",(0,i.jsx)(s.p,{children:"3.接着统计函数为各个组计算统计值；"}),"\n",(0,i.jsxs)(s.p,{children:["4.最后 ",(0,i.jsx)(s.code,{children:"having"})," 子句去掉不符合其组搜索条件的各组数据行。"]}),"\n",(0,i.jsx)(s.h5,{id:n[10].id,children:n[10].value}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"where"})," 子句都可以用 ",(0,i.jsx)(s.code,{children:"having"})," 代替，区别在于 ",(0,i.jsx)(s.code,{children:"where"})," 过滤行，",(0,i.jsx)(s.code,{children:"having"})," 过滤分组；"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"where"})," 子句的作用是在对查询结果进行分组前，将不符合 ",(0,i.jsx)(s.code,{children:"where"})," 条件的",(0,i.jsx)(s.strong,{children:"行"}),"去掉，即在分组之前过滤数据，",(0,i.jsx)(s.code,{children:"where"})," 条件中",(0,i.jsx)(s.strong,{children:"不能包含聚组函数"}),"，使用 ",(0,i.jsx)(s.code,{children:"where"})," 条件过滤出特定的行；"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"having"})," 子句的作用是筛选满足条件的",(0,i.jsx)(s.strong,{children:"组"}),"，即在分组之后过滤数据，条件中",(0,i.jsx)(s.strong,{children:"经常包含聚组函数"}),"，使用 ",(0,i.jsx)(s.code,{children:"having"})," 条件过滤出特定的组，也可以使用多个分组标准进行分组。"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"having"})," 结合 ",(0,i.jsx)(s.code,{children:"where"})," 示例："]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:x})}),"\n",(0,i.jsx)(s.h5,{id:n[11].id,children:n[11].value}),"\n",(0,i.jsx)(s.p,{children:"基本格式"}),"\n",(0,i.jsx)(s.pre,{tabIndex:"0","data-language":"plaintext","data-word-wrap":"","data-copy":"",children:(0,i.jsx)(s.code,{children:(0,i.jsx)(s.span,{children:(0,i.jsx)(s.span,{children:"select [聚合函数] 字段名 from 表名 [where 查询条件]　[group by 字段名] [order by 字段名 排序方向]"})})})}),"\n",(0,i.jsx)(s.p,{children:"示例：（以降序方式输出数据分类的汇总）"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:j})}),"\n",(0,i.jsxs)(s.p,{children:["若分组字段和排序字段一样时，可不需要 ",(0,i.jsx)(s.code,{children:"order by"})," 关键字，则只需告知排序方向，即可简写成："]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"img",placeholder:"blur",src:o})})]})},"/opengauss/04-select-data-group",{filePath:"pages/opengauss/04-select-data-group.md",timestamp:1729691153e3,pageMap:d.v,frontMatter:{title:"分组选择数据"},title:"分组选择数据"},"undefined"==typeof RemoteContent?useTOC:RemoteContent.useTOC)},845:function(e,n,s){"use strict";s.d(n,{v:function(){return i}});let i=[{data:{intro:"Introduction","00-at-the-beginning":"At the beginning","-- Main Chapter":{type:"separator",title:"Main Chapter"},"01-ds-sys-summary":"数据库系统概述","02-relation-db-sys":"关系数据库","03-data-def-lang":"关系数据库标准语言——SQL","04-relation-db-theory":"关系数据库理论","05-ds-security-protect":"数据库安全保护","06-db-design":"数据库设计","-- Extend":{type:"separator",title:"Extend"},opengauss:"OpenGauss",experiment:"Experiment","ex01-ds-type":"Ex01: 数据库类型",last:"At the last",index:{title:"Home",type:"page",theme:{layout:"raw"}},documention:{title:"Documention",type:"page",href:"./intro"},contact:{title:"Blog ↗",type:"page",href:"https://blog.cworld.top/",newWindow:!0}}},{name:"00-at-the-beginning",route:"/00-at-the-beginning",frontMatter:{title:"At the Beginning"}},{name:"01-ds-sys-summary",route:"/01-ds-sys-summary",frontMatter:{title:"第 1 章 数据库系统概述"}},{name:"02-relation-db-sys",route:"/02-relation-db-sys",frontMatter:{title:"第 2 章 关系数据库"}},{name:"03-data-def-lang",route:"/03-data-def-lang",frontMatter:{title:"第 3 章 关系数据库标准语言--SQL"}},{name:"04-relation-db-theory",route:"/04-relation-db-theory",frontMatter:{title:"第 4 章 关系数据库理论"}},{name:"05-ds-security-protect",route:"/05-ds-security-protect",frontMatter:{title:"第 5 章 数据库安全保护"}},{name:"06-db-design",route:"/06-db-design",frontMatter:{title:"第 6 章 数据库设计"}},{name:"ex01-ds-type",route:"/ex01-ds-type",frontMatter:{title:"数据库类型"}},{name:"experiment",route:"/experiment",children:[{name:"01-setup-mysql",route:"/experiment/01-setup-mysql",frontMatter:{title:"01 Basic Mysql, Create table, alter table"}},{name:"02-select-create-view",route:"/experiment/02-select-create-view",frontMatter:{title:"02 Practicing Select and Creating view"}},{name:"03-constraints-and-indexing",route:"/experiment/03-constraints-and-indexing",frontMatter:{title:"03 Data integrity constraints, the function of use, index creation"}},{name:"04-procedure-function-cursor",route:"/experiment/04-procedure-function-cursor",frontMatter:{title:"04 Procedure, Function and Cursor"}},{name:"05-access-control",route:"/experiment/05-access-control",frontMatter:{title:"05 Mysql access control"}}]},{name:"experiment",route:"/experiment",frontMatter:{sidebarTitle:"Experiment"}},{name:"index",route:"/",frontMatter:{title:"Database Learning – Created by CWorld",gitTimestamp:!1}},{name:"intro",route:"/intro",frontMatter:{sidebarTitle:"Intro"}},{name:"last",route:"/last",frontMatter:{sidebarTitle:"Last"}},{name:"opengauss",route:"/opengauss",children:[{name:"01-getting-started",route:"/opengauss/01-getting-started",frontMatter:{title:"初识 OpenGauss"}},{name:"02-basic-queries",route:"/opengauss/02-basic-queries",frontMatter:{title:"连接查询和子查询"}},{name:"03-aggregate-fun-query",route:"/opengauss/03-aggregate-fun-query",frontMatter:{title:"使用聚合函数查询"}},{name:"04-select-data-group",route:"/opengauss/04-select-data-group",frontMatter:{title:"分组选择数据"}},{name:"05-alter-database",route:"/opengauss/05-alter-database",frontMatter:{title:"修改数据库"}},{name:"06-other-func-use",route:"/opengauss/06-other-func-use",frontMatter:{title:"其他函数的使用"}}]},{name:"opengauss",route:"/opengauss",frontMatter:{sidebarTitle:"Opengauss"}}]}},function(e){e.O(0,[812,774,888,179],function(){return e(e.s=3497)}),_N_E=e.O()}]);